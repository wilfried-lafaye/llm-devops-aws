<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå¨Ô∏è Dashboard Qualit√© de l'Air - France</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1>üå¨Ô∏è Air Quality</h1>
                <p>Dashboard France</p>
            </div>
            
            <div class="nav-menu">
                <button class="nav-item active" data-page="dashboard">
                    <span class="icon">üìä</span>
                    <span>Dashboard</span>
                </button>
                <button class="nav-item" data-page="map">
                    <span class="icon">üó∫Ô∏è</span>
                    <span>Carte</span>
                </button>
                <button class="nav-item" data-page="data">
                    <span class="icon">üìã</span>
                    <span>Donn√©es</span>
                </button>
                <button class="nav-item" data-page="trends">
                    <span class="icon">üìà</span>
                    <span>Tendances</span>
                </button>
            </div>
            
            <div class="sidebar-footer">
                <div class="api-status" id="api-status">
                    <span class="status-dot"></span>
                    <span>V√©rification API...</span>
                </div>
            </div>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <section id="page-dashboard" class="page active">
                <header class="page-header">
                    <h2>Vue d'ensemble</h2>
                    <div class="filters">
                        <select id="filter-region" class="filter-select">
                            <option value="">Toutes les r√©gions</option>
                        </select>
                        <select id="filter-year" class="filter-select">
                            <option value="">Toutes les ann√©es</option>
                        </select>
                    </div>
                </header>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon no2">NO‚ÇÇ</div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-no2">--</span>
                            <span class="stat-label">¬µg/m¬≥ moyenne</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon pm10">PM10</div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-pm10">--</span>
                            <span class="stat-label">¬µg/m¬≥ moyenne</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon pm25">PM2.5</div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-pm25">--</span>
                            <span class="stat-label">¬µg/m¬≥ moyenne</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon o3">O‚ÇÉ</div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-o3">--</span>
                            <span class="stat-label">¬µg/m¬≥ moyenne</span>
                        </div>
                    </div>
                </div>
                
                <div class="charts-grid">
                    <div class="chart-card">
                        <h3>√âvolution des polluants</h3>
                        <canvas id="chart-evolution"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Comparaison par r√©gion</h3>
                        <canvas id="chart-regions"></canvas>
                    </div>
                </div>
                
                <div class="info-cards">
                    <div class="info-card">
                        <h4>üìä Total d'enregistrements</h4>
                        <p class="big-number" id="total-records">--</p>
                    </div>
                    <div class="info-card">
                        <h4>üèôÔ∏è Communes</h4>
                        <p class="big-number" id="total-communes">--</p>
                    </div>
                    <div class="info-card">
                        <h4>üìç R√©gions</h4>
                        <p class="big-number" id="total-regions">--</p>
                    </div>
                </div>
            </section>
            
            <!-- Map Page -->
            <section id="page-map" class="page">
                <header class="page-header">
                    <h2>Carte Interactive</h2>
                    <div class="filters">
                        <select id="map-pollutant" class="filter-select">
                            <option value="no2">NO‚ÇÇ</option>
                            <option value="pm10">PM10</option>
                            <option value="pm25">PM2.5</option>
                            <option value="o3">O‚ÇÉ</option>
                        </select>
                        <select id="map-year" class="filter-select">
                            <option value="">Toutes les ann√©es</option>
                        </select>
                    </div>
                </header>
                <div id="map-container">
                    <div id="map"></div>
                </div>
                <div class="map-legend">
                    <span class="legend-item"><span class="dot low"></span> Faible</span>
                    <span class="legend-item"><span class="dot medium"></span> Mod√©r√©</span>
                    <span class="legend-item"><span class="dot high"></span> √âlev√©</span>
                </div>
            </section>
            
            <!-- Data Page -->
            <section id="page-data" class="page">
                <header class="page-header">
                    <h2>Donn√©es brutes</h2>
                    <div class="filters">
                        <input type="text" id="search-commune" class="filter-input" placeholder="Rechercher une commune...">
                        <select id="data-region" class="filter-select">
                            <option value="">Toutes les r√©gions</option>
                        </select>
                        <button id="btn-refresh" class="btn-primary">üîÑ Actualiser</button>
                    </div>
                </header>
                <div class="table-container">
                    <table id="data-table">
                        <thead>
                            <tr>
                                <th>Commune</th>
                                <th>R√©gion</th>
                                <th>Ann√©e</th>
                                <th>NO‚ÇÇ</th>
                                <th>PM10</th>
                                <th>PM2.5</th>
                                <th>O‚ÇÉ</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="data-tbody">
                            <!-- Data will be inserted here -->
                        </tbody>
                    </table>
                </div>
                <div class="pagination">
                    <button id="btn-prev" class="btn-secondary" disabled>‚Üê Pr√©c√©dent</button>
                    <span id="pagination-info">Page 1</span>
                    <button id="btn-next" class="btn-secondary">Suivant ‚Üí</button>
                </div>
            </section>
            
            <!-- Trends Page -->
            <section id="page-trends" class="page">
                <header class="page-header">
                    <h2>Analyse des tendances</h2>
                    <div class="filters">
                        <select id="trend-pollutant" class="filter-select">
                            <option value="no2">NO‚ÇÇ</option>
                            <option value="pm10">PM10</option>
                            <option value="pm25">PM2.5</option>
                            <option value="o3">O‚ÇÉ</option>
                        </select>
                        <select id="trend-region" class="filter-select">
                            <option value="">Toutes les r√©gions</option>
                        </select>
                    </div>
                </header>
                <div class="trend-chart-container">
                    <canvas id="chart-trend"></canvas>
                </div>
                <div class="trend-analysis">
                    <div class="analysis-card">
                        <h4>üìâ Analyse</h4>
                        <p id="trend-analysis-text">S√©lectionnez un polluant pour voir l'analyse.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <!-- Modal for CRUD operations -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">D√©tails</h3>
                <button class="modal-close" id="modal-close">√ó</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Modal content -->
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="modal-cancel">Annuler</button>
                <button class="btn-primary" id="modal-confirm">Confirmer</button>
            </div>
        </div>
    </div>
    
    <!-- Toast notifications -->
    <div id="toast-container"></div>
    
    <script src="js/api.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
